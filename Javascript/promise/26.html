<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title> </title>
  </head>
  <body></body>
  <script src="js/ajax.js"></script>
  <script>
    function query(url, delay = 2000) {
      let promises = [
        //http://localhost:8888/php/user.php?name= 
        ajax(url),
        new Promise((resolve, reject) => {
          setTimeout(() => {
            reject("请求超时");
          }, delay);
        })
      ];
      return Promise.race(promises);
    }
    query(`http://localhost:8888/php/user.php?name= `, 1000)
      .then(value => {
        console.log(value);
      })
      .catch(error => {
        console.log(error);
      });
    // Promise.race(promises)
    //   .then(value => {
    //     console.log(value);
    //   })
    //   .catch(error => {
    //     console.log(error);
    //   });
    // const Hello World = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     resolve("第一个Promise");
    //   }, 200);
    // });
    // const  helloworld = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     resolve("第二个异步");
    //   }, 1000);
    // });
    // Promise.race([Hello World,  helloworld])
    //   .then(results => {
    //     console.log(results);
    //   })
    //   .catch(msg => {
    //     console.log(msg);
    //   });
  </script>
</html>
